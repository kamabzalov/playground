<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>

	<script>
		if(true) {
			var x = 10;
			//let x = 10;
			document.write(x + "<br>");
		}
		document.write(x + "<br>");

		var y = 11;
		if(true) {
			let y = 20;
		}

		document.write(y + "<br>");

		const PI = 3.14159;
		if(true) {
			const PI = 2.13;
			document.write(PI + "<br>");
		}		
		document.write(PI + "<br>");

		let fname = "Kamil";
		let lname = "Abzalov";

		document.write(`${fname} ${lname}<br>`);

		let num1 = 10;
		let num2 = 5;

		document.write(`${num1 * num2} <br>`);	

		function doMath(strings, ...values)	{
			if(strings[0] == 'Add') {
				document.write(`${values[0] + values[1]} <br>`);				
			} else if(strings[0] === 'Sub') {
				document.write(`${values[0] - values[1]} <br>`);			
			}
		}

		doMath `Add${10} ${20}`;
		doMath `Sub${10} ${20}`;

		for(let c of fname) {
			document.write(`${c}<br>`);	
		}

		document.write("Hello " . repeat(3) + "<br>");
		document.write(fname.startsWith("K") + "<br>");							
		document.write(fname.endsWith("i") + "<br>");							
		document.write(fname.includes("mi") + "<br>");			
		let mult = "This is \
		a multiline \
		string";

		document.write(`${mult}<br>`);

		function getSum(num1 = 1, num2 = 2) {
			document.write(`${num1} + ${num2} = ${num1 + num2}<br>`);
		}

		getSum(3);

		function getSumMore(...vals) {
			let sum = 0;
			for(let i = 0, len = vals.length; i < len; i++) {
				sum += vals[i];
			}
			document.write(`${sum}<br>`);
		}

		getSumMore(1,2,3,4);

		let vals = [1,2,3,4];

		getSumMore(...vals);

		let difference = (num1, num2) => num1 - num2;
		document.write(`${difference(5,10)}<br>`);

		let multi = (num1, num2) => {
			let product = num1 * num2;
			document.write(`${num1} * ${num2} = ${product} <br/>`);
		}
		multi(5,4);

		let valArr = [1,2,3,4,5];

		let sumVals = valArr.reduce((a, b) => a + b);
		document.write(`Sum: ${sumVals}  <br/>`);

		let evens = valArr.filter(v => v % 2 == 0);
		document.write(`Evens: ${evens}  <br/>`);		
		
		let doubles = valArr.map(v => v* 2);
		document.write(`Doubles: ${doubles}  <br/>`);	

		function createAnimal(name, owner) {
			return {
				name,
				owner,
				getInfo() {
					return `${this.name} is owned by ${this.owner}`
				},
				address: {
					street: '123 main',
					city: 'Moscow'
				}
			};
		}

		var spot = createAnimal("Spot", "John");
		document.write(`${spot.getInfo()}<br/>`);
		document.write(`${spot.name}<br/>`);
		document.write(`${Object.getOwnPropertyNames(spot).join(" ")}<br/>`);
		let {name, owner} = spot;
		document.write(`Name: ${name}<br/>`);
		let {address} = spot;
		document.write(`Address: ${address.street}<br/>`);

		let favNums = [2.718, .05772, 4.678];
		let [,,chaos] = favNums;
		document.write(`Chaos: ${chaos}<br/>`);

		let [, ...last2] = favNums;
		document.write(`Last two: ${last2[0]}<br/>`);

		let val1 = 1, val2 = 2;
		[val1, val2] = [val2, val1];
		document.write(`Val2: ${val2} <br/>`);


		class Mammal {
			constructor(name) {
				this._name = name;
			}

			get name() {
				return this._name;
			}

			set name(name) {
				this._name = name;
			}

			static makeAnimal(name) {
				return new Mammal(name);
			}

			getInfo() {
				return `${this.name} is a mammal`
			}
		}

		let monkey = new Mammal("Fred");
		monkey.name = "Mark";

		document.write(`Mammal: ${monkey.name}<br/>`);

		let chipmunk = Mammal.makeAnimal("Chipper");

		document.write(`Mammal2: ${chipmunk.name}<br/>`);

		class Marsupial extends Mammal {
			constructor(name, hasPouch) {
				super(name);
				this._hasPouch = hasPouch;
			}

			get hasPouch() {
				return this._hasPouch;
			}

			set hasPouch(hasPouch) {
				this._hasPouch = hasPouch;
			}

			getInfo() {
				return `${this.name} is a marsupial`;
			}
		}

		let kangaroo = new Marsupial("Paul", true);

		document.write(`It is ${kangaroo.hasPouch} that ${kangaroo.name} has a pouch <br/>`);

		document.write(`${chipmunk.getInfo()} <br/>`);

		document.write(`${kangaroo.getInfo()} <br/>`);

		function getClass(classType) {
			if(classType == 1) {
				return Mammal;
			} else {
				return Marsupial;
			}
		}

		class Koala extends getClass(2) {
				constructor(name) {
					super(name);
				}
		}

		let carl = new Koala("Carl");

		document.write(`${carl.getInfo()} <br/>`);


		let capital = Symbol("State Capital");

		let pennsylvania = {};

		pennsylvania[capital] = "Harrisburg";

		document.write(`Capital of PA ${pennsylvania[capital]}<br/>`);

		document.write(`Symbol Capital ${capital.toString()}<br/>`);

		let employNum = Symbol.for("Employee Number");

		let bobSmith = {};
		bobSmith[employNum] = 10;

		

		document.write(`Bob: ${bobSmith[employNum]}<br/>`);
		

		let array1 = Array.of(1,2,3);

		let array2 = Array.from("word");

		let array3 = Array.from(array1, (value) => value * 2);

		for(let val of array1)
			document.write(`${val}<br/>`);

		var randSet = new Set();
		randSet.add(10);
		randSet.add("Word");

		document.write(`Has 10: ${randSet.has(10)}<br/>`);

		document.write(`Size: ${randSet.size}<br/>`);

		randSet.delete(10);

		for(let val of randSet) document.write(`Set val: ${val}<br/>`);

		var randMap = new Map();
		randMap.set("key", "Random String");

		randMap.set("key", 10);

		document.write(`key1: ${randMap.get("key1")}<br/>`);
		document.write(`key2: ${randMap.get("key2")}<br/>`);
		document.write(`Size: ${randMap.size}<br/>`);
		
		randMap.forEach(function(value, key) {
			document.write(`${key} : ${value}<br/>`);
		});	

		var p1 = Promise.resolve("resolve me");

		p1.then((res) => document.write(`${res}<br/>`));

		var p2 = new Promise(function(resolve, reject){
			setTimeout(() => resolve('Resolve Me'), 2000);
		});

		p2.then((res) => document.write(`${res}<br/>`));

		let randVal = 18;

		var p3 = new Promise(function(resolve, reject){
			if(randVal == 6) {
				resolve("Good value");
			} else {
				reject("Bad value");
			}
		});

		p3.then((val) => document.write(`${val}<br/>`),
			(err) => document.write(`${err}<br/>`));

		var p4 = new Promise((resolve, reject) => {
			if(randVal <= 17) {
				throw new Error("Can't Vote");
			} else {
				resolve("Can vote");
			}
		});

		p4.then((val) => document.write(`${val}<br/>`))
		.catch((err) => document.write(`${err.message}<br/>`));
	</script>
</body>
</html>