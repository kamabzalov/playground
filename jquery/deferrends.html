<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		.box {
			width: 200px;
			height: 200px;
			background: green;
			display: inline-block;
			margin-right: 3em;
		}
	</style>
</head>
<body>

	<div class="box">my Box</div>
	<div class="box">my Box</div>
	<div class="box">my Box</div>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

	<script>
		/*var myVar;
		var setVal = function() {
			var deferred = new $.Deferred();
			setTimeout(function(){
				myVar = "myValue";
				//deferred.resolve();
				deferred.reject();
			}, 2000);

			return deferred.promise();
		};

		setVal().then(
			function(){
				console.log('all done' + myVar);
			}, 
			function(){
			console.log('failed');
			}
		);

		$.searchVK = function (search) {
			var dfd = new $.Deferred();
			return $.ajax({
				url: 'http://search.twitter.com/search.json',
				data: {q: search},
				dataType: 'jsonp'
			}).promise();
		};

		var outer = $.searchVK('cats');

		outer.then(function(results){
			console.log(results);
		});

		outer.then(function(){
			console.log('123');
		});*/


		$('div.box').each(function(i){
			$(this).delay(1000* i++).fadeOut(1000);
		}).promise().done(function(){
			console.log('finished');
		});

		function getTweets(search) {
			return $.ajax({
				url: 'http://search.twitter.com/search.json',
				data: {q: search},
				dataType: 'jsonp'
			});
		}

		$.when(getTweets('dogs'), getTweets('cats')).done(function(results1, results2){
			console.log(results1);
			console.log(results2);
		});
		
	</script>

</body>
</html>